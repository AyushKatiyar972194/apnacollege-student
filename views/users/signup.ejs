<% layout("/layouts/boilerplate")%>

<div class="login-bg d-flex align-items-center justify-content-center min-vh-100">
  <div class="login-card p-4 p-md-5 rounded-4 shadow bg-white mx-2" style="max-width: 400px; width: 100%;">
    <div class="text-center mb-3">
      <img src="/images/logo.png" alt="FortuneVila" style="height:48px;width:auto;" onerror="this.style.display='none'">
      <h1 class="fw-bold fs-3 mt-2 mb-1">Create Account</h1>
      <div class="text-muted mb-2">Sign up for FortuneVila</div>
    </div>
    <a href="/auth/google" class="google-btn-auth mb-3" style="text-decoration: none;">
      <div class="google-btn-auth-content">
        <div class="google-btn-auth-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 48 48">
            <g>
              <path fill="#4285F4" d="M24 9.5c3.54 0 6.7 1.22 9.19 3.22l6.85-6.85C35.91 2.09 30.28 0 24 0 14.82 0 6.71 5.1 2.69 12.55l7.98 6.2C12.36 13.13 17.74 9.5 24 9.5z"/>
              <path fill="#34A853" d="M46.1 24.55c0-1.64-.15-3.22-.42-4.74H24v9.01h12.42c-.54 2.9-2.18 5.36-4.65 7.03l7.19 5.59C43.98 37.13 46.1 31.36 46.1 24.55z"/>
              <path fill="#FBBC05" d="M10.67 28.13a14.5 14.5 0 0 1 0-8.26l-7.98-6.2A23.94 23.94 0 0 0 0 24c0 3.77.9 7.34 2.69 10.55l7.98-6.2z"/>
              <path fill="#EA4335" d="M24 48c6.28 0 11.91-2.09 16.04-5.7l-7.19-5.59c-2.01 1.35-4.59 2.16-7.85 2.16-6.26 0-11.64-3.63-13.33-8.87l-7.98 6.2C6.71 42.9 14.82 48 24 48z"/>
              <path fill="none" d="M0 0h48v48H0z"/>
            </g>
          </svg>
        </div>
        <span class="google-btn-auth-text">Continue with Google</span>
      </div>
    </a>
    <div class="or-divider my-3"><span>or</span></div>
    <form action="/signup" method="POST" novalidate class="needs-validation">
      <div class="mb-3 input-group">
        <span class="input-group-text bg-light border-0"><i class="bi bi-person"></i></span>
        <input name="username" id="username" type="text" class="form-control form-control-lg border-0 bg-light" required minlength="3" maxlength="20" placeholder="Username">
        <div class="invalid-feedback">Username must be between 3 and 20 characters.</div>
      </div>
      <div class="mb-3 input-group">
        <span class="input-group-text bg-light border-0"><i class="bi bi-envelope"></i></span>
        <input name="email" id="email" type="email" class="form-control form-control-lg border-0 bg-light" required placeholder="Email">
        <div class="invalid-feedback">Please enter a valid email address.</div>
      </div>
      <div class="mb-3 input-group">
        <span class="input-group-text bg-light border-0"><i class="bi bi-lock"></i></span>
        <input name="password" id="password" type="password" class="form-control form-control-lg border-0 bg-light" required minlength="6" placeholder="Password">
        <div class="invalid-feedback">Password must be at least 6 characters long.</div>
      </div>
      <div class="mb-3 input-group">
        <span class="input-group-text bg-light border-0"><i class="bi bi-lock-fill"></i></span>
        <input name="confirmPassword" id="confirmPassword" type="password" class="form-control form-control-lg border-0 bg-light" required placeholder="Repeat password">
        <div class="invalid-feedback">Passwords do not match.</div>
      </div>
      <button type="submit" class="btn btn-success btn-lg w-100 mb-2">Sign Up</button>
      <div class="text-center mt-2">
        <span class="text-muted">Already have an account?</span>
        <a href="/login" class="fw-semibold text-decoration-none">Login</a>
      </div>
    </form>
  </div>
</div>

<script>
// Client-side password validation
document.querySelector('form').addEventListener('submit', function(e) {
    const password = document.getElementById('password').value;
    const confirmPassword = document.getElementById('confirmPassword').value;
    
    if (password !== confirmPassword) {
        e.preventDefault();
        document.getElementById('confirmPassword').setCustomValidity('Passwords do not match');
    } else {
        document.getElementById('confirmPassword').setCustomValidity('');
    }
});

// Clear custom validity when user types
document.getElementById('confirmPassword').addEventListener('input', function() {
    this.setCustomValidity('');
});
</script>    